<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="JVM Source Analysis" version="21.0.0" type="device">
  <diagram id="g1-heap-memory" name="G1堆内存结构">
    <mxGraphModel dx="1600" dy="1000" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1800" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- 标题 -->
        <mxCell id="title" value="&lt;font style=&quot;font-size: 24px;&quot;&gt;&lt;b&gt;G1 堆内存结构详解&lt;/b&gt;&lt;/font&gt;&lt;br&gt;源码: g1CollectedHeap.hpp, heapRegion.hpp, g1RemSet.hpp" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="550" y="20" width="700" height="50" as="geometry" />
        </mxCell>
        
        <!-- ==================== G1CollectedHeap 结构 ==================== -->
        <mxCell id="g1heap-title" value="&lt;b&gt;G1CollectedHeap&lt;/b&gt;&lt;br&gt;(g1CollectedHeap.hpp)" style="text;html=1;strokeColor=none;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="90" width="350" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="g1heap" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="130" width="350" height="580" as="geometry" />
        </mxCell>
        
        <!-- 核心字段 -->
        <mxCell id="g1-hrm" value="&lt;b&gt;_hrm&lt;/b&gt; : HeapRegionManager&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;⭐ 管理所有HeapRegion&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;8GB堆 = 4096个Region&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="140" width="330" height="55" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-policy" value="&lt;b&gt;_g1_policy&lt;/b&gt; : G1Policy*&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;⭐ GC策略决策器&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;决定回收哪些Region、暂停时间预测&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="200" width="330" height="55" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-allocator" value="&lt;b&gt;_allocator&lt;/b&gt; : G1Allocator*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;对象分配器&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;管理TLAB和慢速分配&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="260" width="330" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-cm" value="&lt;b&gt;_cm&lt;/b&gt; : G1ConcurrentMark*&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;⭐ 并发标记器&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;管理并发标记阶段&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="315" width="330" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-remset" value="&lt;b&gt;_rem_set&lt;/b&gt; : G1RemSet*&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;⭐ 记忆集管理器&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;跨Region引用追踪&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="370" width="330" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-cardtable" value="&lt;b&gt;_card_table&lt;/b&gt; : G1CardTable*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;卡表 (写屏障支持)&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;8GB堆 → 16MB卡表&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="425" width="330" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-young" value="&lt;b&gt;_young_list&lt;/b&gt; : YoungList*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;年轻代Region列表&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="480" width="160" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-humongous" value="&lt;b&gt;_humongous_set&lt;/b&gt;&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;大对象Region集合&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="220" y="480" width="160" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-old" value="&lt;b&gt;_old_set&lt;/b&gt; : HeapRegionSet&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;老年代Region集合&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="525" width="160" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-free" value="&lt;b&gt;_free_list&lt;/b&gt;&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;空闲Region列表&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="220" y="525" width="160" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-archive" value="&lt;b&gt;_archive_set&lt;/b&gt; : HeapRegionSet&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;归档Region (CDS)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="570" width="160" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-survivor" value="&lt;b&gt;_survivor&lt;/b&gt; : SurvivorGCAllocRegion&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;Survivor分配区&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="220" y="570" width="160" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-refproc" value="&lt;b&gt;_ref_processor_stw&lt;/b&gt; : ReferenceProcessor*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;STW阶段引用处理器&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="615" width="165" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-refproc-cm" value="&lt;b&gt;_ref_processor_cm&lt;/b&gt;&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;并发标记引用处理&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="220" y="615" width="160" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="g1-workers" value="&lt;b&gt;_workers&lt;/b&gt; : WorkGang*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;并行GC工作线程&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;默认 = CPU核心数&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="660" width="330" height="45" as="geometry" />
        </mxCell>
        
        <!-- ==================== HeapRegion 结构 ==================== -->
        <mxCell id="hr-title" value="&lt;b&gt;HeapRegion&lt;/b&gt;&lt;br&gt;(heapRegion.hpp)" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="90" width="300" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="heapregion" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="130" width="300" height="480" as="geometry" />
        </mxCell>
        
        <mxCell id="hr-bottom" value="&lt;b&gt;_bottom&lt;/b&gt; : HeapWord*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;Region起始地址&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="140" width="140" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="hr-top" value="&lt;b&gt;_top&lt;/b&gt; : HeapWord*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;已分配位置&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="575" y="140" width="135" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="hr-end" value="&lt;b&gt;_end&lt;/b&gt; : HeapWord*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;Region结束地址&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;_end - _bottom = 1-32MB&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="185" width="280" height="45" as="geometry" />
        </mxCell>
        
        <mxCell id="hr-type" value="&lt;b&gt;_type&lt;/b&gt; : HeapRegionType&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;⭐ Region类型&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;Free/Eden/Survivor/Old/Humongous&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="235" width="280" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="hr-index" value="&lt;b&gt;_hrm_index&lt;/b&gt; : uint&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;在HeapRegionManager中的索引&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;0 ~ 4095 (8GB堆)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="290" width="280" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="hr-remset" value="&lt;b&gt;_rem_set&lt;/b&gt; : HeapRegionRemSet*&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;⭐ 记忆集 (谁引用了我)&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;记录其他Region指向本Region的引用&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="345" width="280" height="55" as="geometry" />
        </mxCell>
        
        <mxCell id="hr-gc-eff" value="&lt;b&gt;_gc_efficiency&lt;/b&gt; : double&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;回收效率 = 可回收空间/回收成本&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;用于选择回收Region&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="405" width="280" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="hr-young-index" value="&lt;b&gt;_young_index_in_cset&lt;/b&gt; : int&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;在Collection Set中的索引&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="460" width="280" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="hr-surv-rate" value="&lt;b&gt;_surv_rate_group&lt;/b&gt; : SurvRateGroup*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;存活率分组 (预测用)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="505" width="280" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="hr-humongous" value="&lt;b&gt;_humongous_start_region&lt;/b&gt; : HeapRegion*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;大对象起始Region (连续分配)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="550" width="280" height="40" as="geometry" />
        </mxCell>
        
        <!-- ==================== HeapRegion 内存布局图 ==================== -->
        <mxCell id="layout-title" value="&lt;b&gt;HeapRegion 内存布局&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="620" width="300" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="layout-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="650" width="300" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="layout-used" value="&lt;b&gt;已使用&lt;/b&gt;&lt;br&gt;[_bottom, _top)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=center;" vertex="1" parent="1">
          <mxGeometry x="425" y="655" width="150" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="layout-free" value="&lt;b&gt;空闲&lt;/b&gt;&lt;br&gt;[_top, _end)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=center;" vertex="1" parent="1">
          <mxGeometry x="580" y="655" width="135" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="layout-bottom-label" value="_bottom" style="text;html=1;strokeColor=none;fillColor=none;align=center;" vertex="1" parent="1">
          <mxGeometry x="420" y="710" width="60" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="layout-top-label" value="_top" style="text;html=1;strokeColor=none;fillColor=none;align=center;" vertex="1" parent="1">
          <mxGeometry x="550" y="710" width="40" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="layout-end-label" value="_end" style="text;html=1;strokeColor=none;fillColor=none;align=center;" vertex="1" parent="1">
          <mxGeometry x="680" y="710" width="40" height="20" as="geometry" />
        </mxCell>
        
        <!-- ==================== HeapRegionRemSet 结构 ==================== -->
        <mxCell id="remset-title" value="&lt;b&gt;HeapRegionRemSet (记忆集)&lt;/b&gt;&lt;br&gt;(heapRegionRemSet.hpp)" style="text;html=1;strokeColor=none;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="750" y="90" width="280" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="remset" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="750" y="130" width="280" height="280" as="geometry" />
        </mxCell>
        
        <mxCell id="rs-ot" value="&lt;b&gt;_other_regions&lt;/b&gt; : OtherRegionsTable&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;⭐ 核心数据结构&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;存储指向本Region的外部引用&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="140" width="260" height="55" as="geometry" />
        </mxCell>
        
        <mxCell id="rs-code" value="&lt;b&gt;_code_roots&lt;/b&gt; : CodeRootSet&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;引用本Region的编译代码&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;nmethod中的oop引用&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="200" width="260" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="rs-state" value="&lt;b&gt;_state&lt;/b&gt; : State&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;Untracked/Updating/Complete&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="255" width="260" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="rs-occ" value="&lt;b&gt;_occupied&lt;/b&gt; : size_t&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;记忆集占用的条目数&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="300" width="260" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="rs-strong" value="&lt;b&gt;_strong_code_roots_list&lt;/b&gt; : GrowableArray&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;强引用的代码根列表&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="345" width="260" height="40" as="geometry" />
        </mxCell>
        
        <!-- ==================== G1ConcurrentMark 结构 ==================== -->
        <mxCell id="cm-title" value="&lt;b&gt;G1ConcurrentMark (并发标记)&lt;/b&gt;&lt;br&gt;(g1ConcurrentMark.hpp)" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="750" y="430" width="280" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="cm" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="750" y="470" width="280" height="300" as="geometry" />
        </mxCell>
        
        <mxCell id="cm-bitmap" value="&lt;b&gt;_mark_bitmap_1/_mark_bitmap_2&lt;/b&gt;&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;⭐ 标记位图 (双缓冲)&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;8GB堆 → 2×128MB = 256MB&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="480" width="260" height="55" as="geometry" />
        </mxCell>
        
        <mxCell id="cm-prev" value="&lt;b&gt;_prev_mark_bitmap&lt;/b&gt; : G1CMBitMap*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;上次标记结果&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="540" width="130" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="cm-next" value="&lt;b&gt;_next_mark_bitmap&lt;/b&gt;&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;当前标记结果&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="895" y="540" width="125" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="cm-stack" value="&lt;b&gt;_global_mark_stack&lt;/b&gt; : G1CMMarkStack&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;全局标记栈&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;默认4MB&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="585" width="260" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="cm-tasks" value="&lt;b&gt;_tasks&lt;/b&gt; : G1CMTask**&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;并发标记任务数组&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;每个GC线程一个task&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="640" width="260" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="cm-finger" value="&lt;b&gt;_finger&lt;/b&gt; : HeapWord*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;标记进度指针&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="695" width="130" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="cm-concurrent" value="&lt;b&gt;_concurrent&lt;/b&gt; : bool&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;是否并发执行&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="895" y="695" width="125" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="cm-satb" value="&lt;b&gt;SATB队列&lt;/b&gt; (每线程)&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;Snapshot-At-The-Beginning&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;写屏障记录引用变更&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="735" width="260" height="30" as="geometry" />
        </mxCell>
        
        <!-- ==================== G1Policy 结构 ==================== -->
        <mxCell id="policy-title" value="&lt;b&gt;G1Policy (GC策略)&lt;/b&gt;&lt;br&gt;(g1Policy.hpp)" style="text;html=1;strokeColor=none;fillColor=#e1d5e7;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1060" y="90" width="280" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="policy" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1060" y="130" width="280" height="320" as="geometry" />
        </mxCell>
        
        <mxCell id="pol-pause" value="&lt;b&gt;_pause_time_target_ms&lt;/b&gt; : double&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;⭐ 目标暂停时间&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;默认200ms (-XX:MaxGCPauseMillis)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1070" y="140" width="260" height="55" as="geometry" />
        </mxCell>
        
        <mxCell id="pol-analytics" value="&lt;b&gt;_analytics&lt;/b&gt; : G1Analytics*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;GC数据分析和预测&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;衰减平均值计算&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1070" y="200" width="260" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="pol-ihop" value="&lt;b&gt;_ihop_control&lt;/b&gt; : G1IHOPControl*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;初始堆占用阈值控制&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;触发并发标记的阈值&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1070" y="255" width="260" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="pol-young-gen" value="&lt;b&gt;_young_gen_sizer&lt;/b&gt; : G1YoungGenSizer*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;年轻代大小调整器&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1070" y="310" width="260" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="pol-cset" value="&lt;b&gt;_collection_set&lt;/b&gt; : G1CollectionSet*&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;⭐ 回收集合&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;本次GC要回收的Region列表&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1070" y="355" width="260" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="pol-mmu" value="&lt;b&gt;_mmu_tracker&lt;/b&gt; : G1MMUTracker*&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;最小Mutator利用率追踪&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1070" y="410" width="260" height="35" as="geometry" />
        </mxCell>
        
        <!-- ==================== 堆内存可视化 ==================== -->
        <mxCell id="heap-visual-title" value="&lt;b&gt;G1堆内存可视化 (8GB堆)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1060" y="470" width="280" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="heap-visual" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1060" y="500" width="280" height="200" as="geometry" />
        </mxCell>
        
        <!-- Region 网格 -->
        <mxCell id="r1" value="E" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1065" y="505" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r2" value="E" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1092" y="505" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r3" value="E" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1119" y="505" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r4" value="S" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1146" y="505" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r5" value="O" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1173" y="505" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r6" value="O" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1200" y="505" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r7" value="H" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1227" y="505" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r8" value="H" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1254" y="505" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r9" value="H" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1281" y="505" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r10" value="F" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1308" y="505" width="25" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="r11" value="E" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1065" y="532" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r12" value="O" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1092" y="532" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r13" value="O" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1119" y="532" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r14" value="F" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1146" y="532" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r15" value="E" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1173" y="532" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r16" value="S" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1200" y="532" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r17" value="O" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1227" y="532" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r18" value="F" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1254" y="532" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r19" value="F" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1281" y="532" width="25" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r20" value="E" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1308" y="532" width="25" height="25" as="geometry" />
        </mxCell>
        
        <!-- 更多行... -->
        <mxCell id="more-regions" value="... 共4096个Region ..." style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="1120" y="560" width="150" height="20" as="geometry" />
        </mxCell>
        
        <!-- 图例 -->
        <mxCell id="legend-title" value="&lt;b&gt;图例:&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="1065" y="585" width="50" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="leg-e" value="E=Eden" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1065" y="605" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-s" value="S=Survivor" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1130" y="605" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-o" value="O=Old" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1205" y="605" width="55" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-h" value="H=Humongous" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1265" y="605" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-f" value="F=Free" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1065" y="630" width="55" height="20" as="geometry" />
        </mxCell>
        
        <!-- 关键参数 -->
        <mxCell id="params-box" value="&lt;b&gt;关键参数:&lt;/b&gt;&lt;br&gt;Region大小: 2MB (8GB堆自动计算)&lt;br&gt;Region数量: 4096个&lt;br&gt;大对象阈值: &amp;gt;Region的50% = &amp;gt;1MB&lt;br&gt;卡表大小: 16MB (512字节/Region)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;spacingLeft=10;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1130" y="635" width="205" height="80" as="geometry" />
        </mxCell>
        
        <!-- ==================== 卡表结构 ==================== -->
        <mxCell id="card-title" value="&lt;b&gt;G1CardTable (卡表)&lt;/b&gt;&lt;br&gt;(g1CardTable.hpp)" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="740" width="350" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="cardtable" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="780" width="350" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="ct-base" value="&lt;b&gt;_byte_map&lt;/b&gt; : jbyte*&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;⭐ 卡表字节数组&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;每字节对应512字节堆内存&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="790" width="330" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="ct-size" value="&lt;b&gt;_byte_map_size&lt;/b&gt; : size_t&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;卡表大小&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;8GB堆 → 16MB&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="845" width="160" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="ct-covered" value="&lt;b&gt;_covered&lt;/b&gt; : MemRegion&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;覆盖的堆区域&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="220" y="845" width="160" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="ct-values" value="&lt;b&gt;卡状态值:&lt;/b&gt;&lt;br&gt;clean_card = 0xFF (干净)&lt;br&gt;dirty_card = 0x00 (脏，需扫描)&lt;br&gt;g1_young_gen = 0x01 (年轻代)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=10;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="50" y="900" width="330" height="50" as="geometry" />
        </mxCell>
        
        <!-- ==================== 写屏障流程 ==================== -->
        <mxCell id="barrier-title" value="&lt;b&gt;写屏障流程 (Write Barrier)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="780" width="300" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="barrier-flow" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="810" width="300" height="150" as="geometry" />
        </mxCell>
        
        <mxCell id="bf1" value="1. 对象字段赋值&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;obj.field = newValue&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="430" y="820" width="130" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="bf2" value="2. Pre-Write Barrier&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;SATB记录旧值&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="570" y="820" width="140" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="bf3" value="3. Post-Write Barrier&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;标记卡表为脏&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="430" y="870" width="130" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="bf4" value="4. Refinement&lt;br&gt;&lt;font color=&quot;#666666&quot;&gt;更新RemSet&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="570" y="870" width="140" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="bf-arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" edge="1" parent="1" source="bf1" target="bf2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bf-arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" edge="1" parent="1" source="bf2" target="bf3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="640" y="890" />
              <mxPoint x="560" y="890" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="bf-arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" edge="1" parent="1" source="bf3" target="bf4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="bf-note" value="&lt;font color=&quot;#cc0000&quot;&gt;⭐ 面试重点: SATB + 卡表 = G1并发标记正确性保证&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="420" y="920" width="300" height="30" as="geometry" />
        </mxCell>
        
        <!-- 面试要点 -->
        <mxCell id="interview-note" value="&lt;b&gt;面试要点&lt;/b&gt;:&lt;br&gt;1. G1将堆划分为等大的Region，可动态调整年轻代/老年代比例&lt;br&gt;2. 记忆集(RemSet)记录跨Region引用，避免全堆扫描&lt;br&gt;3. 卡表是写屏障的基础，每512字节对应1字节&lt;br&gt;4. SATB(Snapshot-At-The-Beginning)保证并发标记正确性&lt;br&gt;5. Collection Set选择回收价值高的Region，实现可预测暂停&lt;br&gt;6. 大对象(Humongous)直接分配在老年代，占用连续Region" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="750" y="790" width="350" height="130" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
